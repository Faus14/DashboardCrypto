<!-- Fondo con gradiente -->
<div class="min-h-screen bg-gradient-to-br from-blue-900 via-black to-purple-900 flex items-center justify-center p-4">
  <div class="absolute inset-0 bg-[url('https://cdnjs.cloudflare.com/ajax/libs/pattern.css/1.0.0/pattern.min.css')] opacity-10"></div>

  <div class="container relative max-w-md w-full backdrop-blur-lg bg-white/10 p-8 rounded-2xl shadow-2xl border border-white/20">

    <!-- Logo -->
    <div class="flex justify-center mb-8">
      <div class="w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/>
        </svg>
      </div>
    </div>

    <!-- Formulario de Login -->
    <form (ngSubmit)="onLogin()" class="space-y-6">
      <div class="text-center space-y-2">
        <h1 class="text-3xl font-bold text-white">Crypto Portfolio</h1>
        <p class="text-gray-300">Accede a tu portafolio</p>
      </div>

      <div class="form-control">
        <label class="label">
          <span class="label-text text-gray-300">Correo electrónico</span>
        </label>
        <input 
          type="text"
          name="username"
          [(ngModel)]="loginObj.username"
          class="input input-bordered w-full bg-white/5 border-white/10 text-white placeholder-gray-400 focus:border-purple-500 focus:ring-2 focus:ring-purple-500"
          placeholder="Ingresa tu email"
        >
      </div>

      <div class="form-control">
        <input 
          type="password"
          name="password"
          [(ngModel)]="loginObj.password"
          class="input input-bordered w-full bg-white/5 border-white/10 text-white placeholder-gray-400 focus:border-purple-500 focus:ring-2 focus:ring-purple-500"
          placeholder="Ingresa tu contraseña"
        >
      </div>

      <button type="submit" class="btn btn-primary w-full bg-gradient-to-r from-blue-500 to-purple-500 border-0 hover:from-blue-600 hover:to-purple-600 text-white font-bold">
        Iniciar Sesión
      </button>
    </form>

    <!-- Error Message (solo si NO está abierto el modal) -->
    <div *ngIf="errorMessage && !isModalOpen" class="alert alert-error bg-red-500/20 border border-red-500/50 text-white mb-4 mt-6 p-3 rounded-lg flex items-center gap-2">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
      </svg>
      <span>{{ errorMessage }}</span>
    </div>

    <!-- Success Message (solo si NO está abierto el modal) -->
    <div *ngIf="successMessage && !isModalOpen" class="alert alert-success bg-green-500/20 border border-green-500/50 text-white mb-4 mt-6 p-3 rounded-lg flex items-center gap-2">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
      </svg>
      <span>{{ successMessage }}</span>
    </div>

    <!-- Link para abrir el modal -->
    <div class="pt-6 text-center">
      <p class="text-gray-300">
        ¿No tienes cuenta? 
        <a (click)="openRegisterModal()" class="text-purple-400 hover:text-purple-300 font-semibold cursor-pointer">Regístrate aquí</a>
      </p>
    </div>

  </div>
</div>

<!-- Modal de Registro -->
<dialog id="register_modal" class="modal modal-bottom sm:modal-middle" [ngClass]="{'modal-open': isModalOpen}">
  <div class="modal-box bg-gradient-to-br from-gray-900 to-gray-800 text-white">

    <h3 class="font-bold text-lg mb-6">Registro de Usuario</h3>

    <form (ngSubmit)="onRegister()" class="space-y-4">
      <div class="form-control">
        <label class="label">
          <span class="label-text text-white">Correo electrónico</span>
        </label>
        <input 
          type="text"
          [(ngModel)]="registerObj.username"
          name="registerUsername"
          class="input input-bordered bg-gray-800/50 border-gray-700 text-white focus:border-blue-500"
          placeholder="Ingrese su correo electrónico"
          required
        />
      </div>

      <div class="form-control">
        <label class="label">
          <span class="label-text text-white">Contraseña</span>
        </label>
        <input 
          type="password"
          [(ngModel)]="registerObj.password"
          name="registerPassword"
          class="input input-bordered bg-gray-800/50 border-gray-700 text-white focus:border-blue-500"
          placeholder="Ingrese una contraseña"
          required
        />
      </div>

      <div class="modal-action">
        <button type="button" class="btn btn-ghost" (click)="closeRegisterModal()">Cancelar</button>
        <button type="submit" class="btn btn-primary bg-gradient-to-r from-blue-500 to-purple-500 border-0">
          Registrarse
        </button>
      </div>
    </form>
  </div>

  <form method="dialog" class="modal-backdrop">
    <button (click)="closeRegisterModal()">close</button>
  </form>
</dialog>
